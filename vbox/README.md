# Знакомство с Oracle Virtual Box

## Запуск и остановка клиента.

1.  Значок Oracle VM VirtualBox на рабочем столе
2.  "C:\Program Files\Oracle\VirtualBox\VirtualBox.exe"

## Импорт существующей виртуальной машины

1.  Импортируйте jessie64\box.ovf (Файл / Импорт конфигураций)
2.  Полезная привычка: сделайте снимок (Snapshot) (Снимки / Сделать снимок)
3.  Запустите виртуальную машину
4.  Войдите как vagrant (Пароль: vagrant)
5.  Посмотрите список работающих программ: pstree
6.  Удалите ненужные пакеты: sudo apt-get remove -y rpcbind exim4-base
7.  Проверьте список работающих программ
8.  Перезапустите виртуальную машину: sudo reboot
9.  Если имеется доступ в Интернет, установите какой-нибудь пакет и проверьте его работу:
    • sudo apt-get update
    • sudo apt-get install –y mc
    • mc
10. Остановите машину: RCtrl + H

## Импорт ВМ от Microsoft

1.  Распакуйте IE6.XP.For.Windows.VirtualBox.zip и импортируйте IE6 - WinXP.ova
2.  После импорта удалите временный файл
3.  Аналогично сделайте снимок начального состояния
4.  Запустите ВМ

## Снимки и состояние машины

1.  Откройте папку ВМ (Машина / Показать в проводнике)
2.  Запустите «долгоиграющую» команду: Win+R ping –t my.urfu.ru
3.  Приостановите работу ВМ (Машина / Приостановить)
4.  Сравните состояние папки
5.  Возобновите работу машины
6.  Завершите работу ВМ штатными средствами ОС (Start / Turn off)
7.  Сделайте снимок
8.  Проверьте содержимое папки
9.  Запустите ВМ и «долгоиграющий» процесс в нём
10. Сделайте снимок и проверьте содержимое папки
11. Выключите машину штатно
12. Вернитесь на один из предыдущих снимков
13. Измените что-то (например, тему оформления) и ещё раз создайте снимок
14. Переключайтесь между снимками, для простоты отказываясь от дополнительных снимков, выключая ВМ разными способами:
    • Средствами ОС
    • Средствами гипервизора
        1.  «Жестким выключением»
        1. С сохранением состояния машины
        1.  Сигнал выключения (эмуляция кнопки питания)
15. Сравнивайте содержимое папки ВМ

## Клонирование ВМ

1.  Создайте два клона ВМ
    • Полный клон
    • Связанный клон
2.  Запустите
3.  Сравните содержимое папок
4.  Удалите оба клона (с удалением файлов)

## Холодная миграция

1.  Остановите ВМ любым способом
2.  Перенесите папку ВМ на другую машину
3.  Подключите её там (Машина / Добавить)
4.  Запустите
5.  Переключайтесь между снимками
6.  Удалите

## Перенос файлов между гипервизором и ВМ

1.  В свойствах ВМ добавьте общую папку (например, папку профиля пользователя)
2.  Внутри ВМ откройте Проводник (Win + E)
3.  Откройте My Network Places / Entire Network / Virtual Box Shared Folders
4.  Откройте общую папку
5.  Попробуйте переносить файлы внутрь ВМ и наоборот

## Сетевой доступ к ВМ

1.  Внутри ВМ создайте пользователя vagrant  с паролем vagrant
    • Start / My Computer / Manage / Local users and Groups / Users / New user
    • Поставьте флажок Password never expires
    • Добавьте его в группу Administrators или хотя бы Remote Desktop Users
2.  Откройте порт ВМ 3389 (Remote Desktop) на гипервизоре (придётся использовать другой номер порта, например 3400).
    • Свойства Машины / Сеть
    • Тип подключения: NAT
    • Дополнительно / Проброс портов
    • Добавить / Порт хоста: 3400, Порт гостя: 3389
3.  Запустите на основной машине клиент RDP (Win + R mstsc)
4.  Подключитесь к localhost:3400
5.  Войдите пользователем vagrant
6.  Согласитесь на всё
7.  Осмотритесь

## Облачный доступ

1.  Выясните IP-адрес своей машины (Win + R ipconfig)
2.  С соседней машины попробуйте войти клиентом RDP на свою (например, 10.16.201.111:3400)
3.  Остановите все ВМ и полностью удалите.
